(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{208:function(a,t,s){"use strict";s.r(t);var e=s(0),r=Object(e.a)({},(function(){var a=this,t=a.$createElement,s=a._self._c||t;return s("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[s("h1",{attrs:{id:"命令介绍"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#命令介绍"}},[a._v("#")]),a._v(" 命令介绍")]),a._v(" "),s("p",[a._v("命令行请务必看一下，对于你开发会有很大的帮助，提升你的开发效率。"),s("code",[a._v("CatchAdmin")]),a._v(" 提供了很多有用的命令，在你的开发使用熟练的话，将会大大增加你的开发效率。")]),a._v(" "),s("h2",{attrs:{id:"安装框架"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#安装框架"}},[a._v("#")]),a._v(" 安装框架")]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("php think catch:install\n")])])]),s("h4",{attrs:{id:"参数列表"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#参数列表"}},[a._v("#")]),a._v(" 参数列表")]),a._v(" "),s("ul",[s("li",[a._v("可选参数 "),s("code",[a._v("-r")]),a._v("，重置数据库")])]),a._v(" "),s("div",{staticClass:"custom-block warning"},[s("p",{staticClass:"custom-block-title"},[a._v("WARNING")]),a._v(" "),s("p",[a._v("使用该选项参数, 通过 migration 的生成的表将会被回滚删除，然后重新添加初始化数据.")])]),a._v(" "),s("h2",{attrs:{id:"备份数据"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#备份数据"}},[a._v("#")]),a._v(" 备份数据")]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("php think backup:data\n")])])]),s("h4",{attrs:{id:"参数列表-2"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#参数列表-2"}},[a._v("#")]),a._v(" 参数列表")]),a._v(" "),s("ul",[s("li",[a._v("必选参数 "),s("code",[a._v("tables")]),a._v(", 多个表需要使用 , 分隔开")]),a._v(" "),s("li",[a._v("可选参数 "),s("code",[a._v("-z")]),a._v(", 是否压缩成 zip 格式")])]),a._v(" "),s("h4",{attrs:{id:"事例"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#事例"}},[a._v("#")]),a._v(" 事例")]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("php think backup:data users,roles -z\n")])])]),s("h2",{attrs:{id:"创建模块"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#创建模块"}},[a._v("#")]),a._v(" 创建模块")]),a._v(" "),s("p",[a._v("如果你想使用模块式开发，请使用下面命令生成模块")]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("php think create:module moduleName\n")])])]),s("h4",{attrs:{id:"参数"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#参数"}},[a._v("#")]),a._v(" 参数")]),a._v(" "),s("ul",[s("li",[a._v("moduleName 模块名称")])]),a._v(" "),s("p",[a._v("该命令会在 catch 目录下生成模块文件夹，默认有三个文件加上若干文件夹")]),a._v(" "),s("ul",[s("li",[a._v("moduleService.php  // 服务启动文件")]),a._v(" "),s("li",[a._v("route.php // 路由文件")]),a._v(" "),s("li",[a._v("module.json  // 模块信息描述文件")])]),a._v(" "),s("p",[a._v("这样基本的模块就创建完毕了。")]),a._v(" "),s("h2",{attrs:{id:"创建表"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#创建表"}},[a._v("#")]),a._v(" 创建表")]),a._v(" "),s("p",[a._v("在创建完"),s("code",[a._v("migrations")]),a._v("，需要设计表结构。可以在官方文档上看到如何使用"),s("a",{attrs:{href:"https://www.kancloud.cn/manual/thinkphp6_0/1118028",target:"_blank",rel:"noopener noreferrer"}},[a._v("数据迁移"),s("OutboundLink")],1),a._v(",当你设计完结构之后，如果还有默认数据的话，需要使用 seeds 进行填充。在做完这些工作之后，使用以下命令")]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("php think catch-migrate:run module\n")])])]),s("div",{staticClass:"custom-block tip"},[s("p",{staticClass:"custom-block-title"},[a._v("TIP")]),a._v(" "),s("p",[a._v("该命令可以生成对应的表结构")])]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("php think catch-seed:run module\n")])])]),s("div",{staticClass:"custom-block tip"},[s("p",{staticClass:"custom-block-title"},[a._v("TIP")]),a._v(" "),s("p",[a._v("该命令可以填充对应的表数据")])]),a._v(" "),s("h2",{attrs:{id:"创建-migration"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#创建-migration"}},[a._v("#")]),a._v(" 创建 Migration")]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("php think catch-migrate:create\n")])])]),s("h4",{attrs:{id:"参数-2"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#参数-2"}},[a._v("#")]),a._v(" 参数")]),a._v(" "),s("ul",[s("li",[a._v("必选参数 module, 模块名称")]),a._v(" "),s("li",[a._v("必选参数 MigrationName，驼峰法命名")])]),a._v(" "),s("h4",{attrs:{id:"实例"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#实例"}},[a._v("#")]),a._v(" 实例")]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("php think catch-migrate:create permissions RoleHasPermissions\n")])])]),s("h2",{attrs:{id:"创建模型"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#创建模型"}},[a._v("#")]),a._v(" 创建模型")]),a._v(" "),s("p",[a._v("当你创建表成功后，还需要生成对应的模型，如果你是自己创建模型的话，还要填充表字段将会很浪费时间，所以才会有该命令的产生。")]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("php think create:model moduleName modelName\n")])])]),s("h5",{attrs:{id:"参数-3"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#参数-3"}},[a._v("#")]),a._v(" 参数")]),a._v(" "),s("ul",[s("li",[a._v("moduelName 模块名称")]),a._v(" "),s("li",[a._v("modelName 模型名称")]),a._v(" "),s("li",[a._v("可选参数 --softDelete 值:SOFTDELETE 软删除参数之后，使用的模型会有区别，请注意")])]),a._v(" "),s("p",[s("code",[a._v("模型名称")]),a._v("和"),s("code",[a._v("模块名")]),a._v("称都是必须的，模型名称还必须是驼峰规则，不然会找不到表，例如你的表名是"),s("code",[a._v("user_role")]),a._v(",那么你的模型名称就应该是 "),s("code",[a._v("UserRole")]),a._v(" 这样的驼峰命名，这是约定。")]),a._v(" "),s("h2",{attrs:{id:"模块禁用"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#模块禁用"}},[a._v("#")]),a._v(" 模块禁用")]),a._v(" "),s("p",[a._v("如果不想使用某个模块了，可以使用下面的命令。")]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("php think disable:module moduleName\n")])])]),s("div",{staticClass:"custom-block warning"},[s("p",{staticClass:"custom-block-title"},[a._v("WARNING")]),a._v(" "),s("p",[a._v("该命令使用之后会将相关菜单全部删除。")])]),a._v(" "),s("h2",{attrs:{id:"模块启用"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#模块启用"}},[a._v("#")]),a._v(" 模块启用")]),a._v(" "),s("p",[a._v("如果想继续使用某个模块了，可以使用下面的命令。")]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("php think enable:module moduleName\n")])])]),s("div",{staticClass:"custom-block tip"},[s("p",{staticClass:"custom-block-title"},[a._v("TIP")]),a._v(" "),s("p",[a._v("该命令使用之后会将相关删除菜单全部恢复。")])]),a._v(" "),s("h2",{attrs:{id:"打包模块"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#打包模块"}},[a._v("#")]),a._v(" 打包模块")]),a._v(" "),s("div",{staticClass:"custom-block tip"},[s("p",{staticClass:"custom-block-title"},[a._v("TIP")]),a._v(" "),s("p",[a._v("这是预留命令，目前来看没有任何作用")])]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("php think package:zip module\n")])])]),s("p",[a._v("该命令会将文件夹压缩成ZIP包。")]),a._v(" "),s("h2",{attrs:{id:"模块服务发现"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#模块服务发现"}},[a._v("#")]),a._v(" 模块服务发现")]),a._v(" "),s("p",[a._v("在 catchAdmin 中使用多模块的时候，必须使用服务发现，保证模块的可用")]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("php think catch-service:discover\n")])])]),s("h2",{attrs:{id:"导出菜单"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#导出菜单"}},[a._v("#")]),a._v(" 导出菜单")]),a._v(" "),s("p",[a._v("目前 CatchAdmin 由于模块独立，所以安装模块的时候对于权限菜单也是独立的，所以当你开发完独立的模块之后，应该是需要单独导出菜单的。所以提供了很简单的命令，支持树状导出。")]),a._v(" "),s("div",{staticClass:"language-sh extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[a._v("php think "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("export")]),a._v(" permissions -p parent_id -m system\n")])])]),s("ul",[s("li",[a._v("permissions 就是权限表,根据实际填写\n"),s("ul",[s("li",[s("code",[a._v("-p")]),a._v(" 树状的父级标识，CatchAdmin permissions 表使用 "),s("code",[a._v("parent")])]),a._v(" "),s("li",[s("code",[a._v("-m")]),a._v(" 导出的模块名称")])])])]),a._v(" "),s("h2",{attrs:{id:"执行-migrate"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#执行-migrate"}},[a._v("#")]),a._v(" 执行 migrate")]),a._v(" "),s("p",[a._v("项目有时候需要更新，新增字段，借助 migration，可以很好的管理表字段的版本。")]),a._v(" "),s("div",{staticClass:"language-sh extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[a._v("php think catch-migrate:run moduleName\n")])])]),s("p",[a._v("可以很好更新模块下的 migration")]),a._v(" "),s("h2",{attrs:{id:"填充数据"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#填充数据"}},[a._v("#")]),a._v(" 填充数据")]),a._v(" "),s("p",[a._v("如果模块有初始化数据需要填充，那么就需要下面的命令")]),a._v(" "),s("div",{staticClass:"language-sh extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[a._v("php think catch-seed:run moduleName\n")])])]),s("p",[a._v("这个命令是更新模块下所有 seed，因为 seed 是没有版本控制的，所以你不能每次都去执行模块下所有的 seeder，你可以指定执行某个 seeder.")]),a._v(" "),s("div",{staticClass:"language-sh extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[a._v("php think catch-seed:run moduleName -s SeederClass\n")])])]),s("h2",{attrs:{id:"缓存敏感词"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#缓存敏感词"}},[a._v("#")]),a._v(" 缓存敏感词")]),a._v(" "),s("div",{staticClass:"language-sh extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[a._v("php think cache:sensitiveWord\n")])])])])}),[],!1,null,null,null);t.default=r.exports}}]);