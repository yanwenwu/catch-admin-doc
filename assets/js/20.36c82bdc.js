(window.webpackJsonp=window.webpackJsonp||[]).push([[20],{219:function(e,t,a){"use strict";a.r(t);var s=a(0),r=Object(s.a)({},(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[a("h2",{attrs:{id:"敏感词"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#敏感词"}},[e._v("#")]),e._v(" 敏感词")]),e._v(" "),a("p",[e._v("最近国内对敏感词管理还是很严格，很多后台管理中都未提供该功能，所以 "),a("code",[e._v("CatchAdmin")]),e._v(" 后台就增加了这个功能模块，\n采用了常见 "),a("code",[e._v("DFA")]),e._v(" 算法提高查找性能。")]),e._v(" "),a("h3",{attrs:{id:"如何使用"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#如何使用"}},[e._v("#")]),e._v(" 如何使用")]),e._v(" "),a("p",[e._v("在后台管理中，系统模块下的敏感词模块添加所需要屏蔽的敏感词。但并不是说非得使用库的形式，下面会提到为什么不需要这么做。")]),e._v(" "),a("p",[a("code",[e._v("CatchAdmin")]),e._v(" 提供了 "),a("code",[e._v("catcher\\library\\Trie")]),e._v(" 扩展来增加你的敏感词库。来看一下代码。")]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("$words = SensitiveWord::cursor();\n\n$trie = new Trie();\n\nforeach ($words as $word) {\n    $trie->add($word->word);\n}\n\n// 获取 trie tree\n$trie->getTries();\n\n// 缓存\n$trie->cached();\n")])])]),a("p",[e._v("从词库里面获取到敏感词之后，添加到 "),a("code",[e._v("Trie Tree")]),e._v(" 里面。"),a("code",[e._v("CatchAdmin")]),e._v(" 已经封装好了好了整个过程。所以可以轻松使用。")]),e._v(" "),a("div",{staticClass:"custom-block warning"},[a("p",{staticClass:"custom-block-title"},[e._v("WARNING")]),e._v(" "),a("p",[a("code",[e._v("trie")]),e._v(" 缓存使用的是 "),a("code",[e._v("Redis")]),e._v("，无法切换，所以请使用 "),a("code",[e._v("cached")]),e._v(" 方法时请链接 "),a("code",[e._v("Redis")]),e._v("，否则请自己选择使用 Cache 进行缓存")])]),e._v(" "),a("h3",{attrs:{id:"获取内容敏感词"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#获取内容敏感词"}},[e._v("#")]),e._v(" 获取内容敏感词")]),e._v(" "),a("p",[a("code",[e._v("getSensitiveWords")]),e._v(" 方法可以获取到内容里面存在的敏感词汇")]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("$tire->getSensitiveWords($trieTree, $content);\n")])])]),a("h3",{attrs:{id:"替换"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#替换"}},[e._v("#")]),e._v(" 替换")]),e._v(" "),a("p",[a("code",[e._v("replace")]),e._v(" 方法可以替换到内容里面存在的敏感词。")]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("$tire->replace($words, $content);\n")])])]),a("h3",{attrs:{id:"验证"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#验证"}},[e._v("#")]),e._v(" 验证")]),e._v(" "),a("p",[a("code",[e._v("CatchAdmin")]),e._v(" 还提供了验证器"),a("code",[e._v("sensitive_word")]),e._v("，可以验证提交内容中是否存在敏感词.")]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("[\n    'word' => 'sensitive_word',\n]\n")])])]),a("h3",{attrs:{id:"命令"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#命令"}},[e._v("#")]),e._v(" 命令")]),e._v(" "),a("p",[e._v("针对敏感词库，"),a("code",[e._v("Catchadmin")]),e._v(" 提供了缓存命令,也是使用 Redis 缓存")]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("php think cache:sensitiveWord\n")])])])])}),[],!1,null,null,null);t.default=r.exports}}]);