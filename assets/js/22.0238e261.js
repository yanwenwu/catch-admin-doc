(window.webpackJsonp=window.webpackJsonp||[]).push([[22],{223:function(t,s,a){"use strict";a.r(s);var e=a(0),r=Object(e.a)({},(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h2",{attrs:{id:"faq"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#faq"}},[t._v("#")]),t._v(" FAQ")]),t._v(" "),a("h3",{attrs:{id:"为什么项目安装成功之后无法访问"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#为什么项目安装成功之后无法访问"}},[t._v("#")]),t._v(" 为什么项目安装成功之后无法访问")]),t._v(" "),a("ul",[a("li",[t._v("安装项目之后，打开 "),a("code",[t._v("DEBUG")]),t._v("，将 "),a("code",[t._v(".env")]),t._v(" 的 "),a("code",[t._v("debug")]),t._v(" 设置为 "),a("code",[t._v("true")]),t._v(".")]),t._v(" "),a("li",[t._v("不要直接访问 "),a("code",[t._v("PHP")]),t._v(" 项目，即使你在配置完域名之后.")])]),t._v(" "),a("h3",{attrs:{id:"为什么权限添加之后没有生效"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#为什么权限添加之后没有生效"}},[t._v("#")]),t._v(" 为什么权限添加之后没有生效")]),t._v(" "),a("p",[a("code",[t._v("CatchAdmin")]),t._v(" 在用户登录之后，会将登录用户的权限信息缓存起来。所以需要刷新一下后台重新拉取信息。")]),t._v(" "),a("h4",{attrs:{id:"常见错误"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#常见错误"}},[t._v("#")]),t._v(" 常见错误")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("Cloud not Create token :strpos() expect parameter 1 to be string. array give\n")])])]),a("p",[t._v("请检查 .env 文件是否生成了 jwt 密钥。如果没有，请执行")]),t._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[t._v("php think jwt:create\n")])])]),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[t._v("TIP")]),t._v(" "),a("p",[t._v("如果还是不行，请检查是否有 .env 文件")])]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v('There are no commands defined in the "jwt" namespace.\n')])])]),a("p",[t._v("解决方案有两个，均由于 Composer 升级导致的。")]),t._v(" "),a("ul",[a("li",[t._v("降低 composer 版本, "),a("code",[t._v("composer self-update --rollback")])]),t._v(" "),a("li",[t._v("升级 tp 核心版本，composer update 即可")])]),t._v(" "),a("blockquote",[a("p",[t._v("目前推荐第一种，防止有其他包没有做适配工作。激进点可以选择第二种，毕竟 composer2 太香了。")])]),t._v(" "),a("h2",{attrs:{id:"为什么找不到-catchadmin-的-sql-文件"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#为什么找不到-catchadmin-的-sql-文件"}},[t._v("#")]),t._v(" 为什么找不到 CatchAdmin 的 SQL 文件")]),t._v(" "),a("p",[t._v("CatchAdmin 摒弃了 SQL 形式的安装，采用了 Migration 建立数据表，数据表在每个模块都是独立。\n具体可以查看模块下的 database 文件下的 migration，可以清晰看到每个模块的数据表的迭代情况")]),t._v(" "),a("h2",{attrs:{id:"如何获取登录用户的信息"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#如何获取登录用户的信息"}},[t._v("#")]),t._v(" 如何获取登录用户的信息")]),t._v(" "),a("p",[t._v("CatchAdmin 可以全局获取登录用户信息")]),t._v(" "),a("div",{staticClass:"language-php extra-class"},[a("pre",{pre:!0,attrs:{class:"language-php"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[t._v("request")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("user")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),a("ul",[a("li",[t._v("获取用户角色")])]),t._v(" "),a("div",{staticClass:"language-php extra-class"},[a("pre",{pre:!0,attrs:{class:"language-php"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[t._v("request")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("user")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getRoles")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),a("h2",{attrs:{id:"composer-install-安装报错"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#composer-install-安装报错"}},[t._v("#")]),t._v(" composer install 安装报错")]),t._v(" "),a("p",[t._v("如果遇到了 "),a("code",[t._v("think service:discover handling the post-autoload-dump event returned with error code 255")]),t._v(" 错误。")]),t._v(" "),a("ul",[a("li",[t._v("如果存在 "),a("code",[t._v("composer.lock")]),t._v(", 删除 vendor 文件夹以及删除 composer.lock 文件，之后 "),a("code",[t._v("composer install")]),t._v("。")]),t._v(" "),a("li",[t._v("直接 "),a("code",[t._v("composer update")]),t._v(" 即可")])]),t._v(" "),a("h3",{attrs:{id:"升级到-6-0-3-之后报错，路由访问不到"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#升级到-6-0-3-之后报错，路由访问不到"}},[t._v("#")]),t._v(" 升级到 6.0.3 之后报错，路由访问不到")]),t._v(" "),a("p",[t._v("建议使用 6.0.2，6.0.3 资源路由出现解析错误，目前无法解决。如果你要升级的话。需要自行改动搜有资源路由。")]),t._v(" "),a("div",{staticClass:"language-php extra-class"},[a("pre",{pre:!0,attrs:{class:"language-php"}},[a("code",[a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$route")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("resouce")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token single-quoted-string string"}},[t._v("'hello'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token single-quoted-string string"}},[t._v("'HelloController'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("p",[t._v("升级之后需要这么改动")]),t._v(" "),a("div",{staticClass:"language-php extra-class"},[a("pre",{pre:!0,attrs:{class:"language-php"}},[a("code",[a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$route")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("get")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token single-quoted-string string"}},[t._v("'hello'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token single-quoted-string string"}},[t._v("'HelloController@index'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$route")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("post")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token single-quoted-string string"}},[t._v("'hello'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token single-quoted-string string"}},[t._v("'HelloController@save'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$route")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("put")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token single-quoted-string string"}},[t._v("'hello/<id>'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token single-quoted-string string"}},[t._v("'HelloController@update'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$route")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("delete")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token single-quoted-string string"}},[t._v("'hello/<id>'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token single-quoted-string string"}},[t._v("'HelloController@delete'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("h3",{attrs:{id:"上线部署"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#上线部署"}},[t._v("#")]),t._v(" 上线部署")]),t._v(" "),a("p",[t._v("优化自动加载的时候要去除 require-dev 的加载目录")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("composer dump-autoload --no-dev\n")])])]),a("h3",{attrs:{id:"出现权限问题"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#出现权限问题"}},[t._v("#")]),t._v(" 出现权限问题")]),t._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[t._v("chmod"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(": Operation not permitted\n")])])]),a("p",[t._v("需要改变运行用户, 找到 fpm 运行的用户组，然后使用下面命令，"),a("code",[t._v("fpm 默认是 www-data")]),t._v(", 如果修改了用户，根据实际情况修改即可。")]),t._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[t._v("chown")]),t._v(" -R www-data:www-data catch/\n")])])]),a("h3",{attrs:{id:"出现路由为定义"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#出现路由为定义"}},[t._v("#")]),t._v(" 出现路由为定义")]),t._v(" "),a("ul",[a("li",[t._v("检查 runtime\\catch 目录下是否有缓存")]),t._v(" "),a("li",[t._v("检查对应的模块是否开启, module.json 文件 enable 字段")])])])}),[],!1,null,null,null);s.default=r.exports}}]);